# yaml-language-server: $schema=/home/me/workspace/azure-rest-api-specs/documentation/api-scenario/references/v1.1/schema.json
scope: ResourceGroup

variables:
  api-version: '2021-09-01-preview'
  location: eastus
  resourceNamePrefix: myWebPubSubService

scenarios:
  - steps:
    - operationId: WebPubSub_CheckNameAvailability
      parameters:
        parameters:
          type: Microsoft.SignalRService/WebPubSub
          name: $(resourceNamePrefix)-$(stepIndex)
      # responses:
      #   200:
      #     headers:
      #     body:
      outputVariables:
        resourceName: 
          fromRequest: /parameters/name
          type: string
    - operationId: WebPubSub_CreateOrUpdate
      parameters:
        resourceName: $(resourceName)
        parameters:
          sku: Free
      # responses:
      #   200:
          